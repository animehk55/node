'use strict'

const aglob = require('aglob')
const path = require('path')
const stringcase = require('stringcase')

module.exports = {
  get favicons () {
    return aglob.sync('dist/favicon/**/*.png', { cwd: __dirname })
      .sort(_compareDepth)
      .map(_img)
  },
  get banners () {
    return aglob.sync('dist/banner/**/*.png', { cwd: __dirname })
      .sort(_compareDepth)
      .map(_img)
  },
  get dummies () {
    return aglob.sync('dist/dummy/**/*.jpg', { cwd: __dirname })
      .sort(_compareDepth)
      .map(_img)
  },
  get vendors () {
    return aglob.sync('dist/vendor/**/*.png', { cwd: __dirname })
      .sort(_compareDepth)
      .map(_img)
  }
}

function _compareDepth (a, b) {
  let separator = /\//g;
  return a.split(separator).length - b.split(separator).length;
}

function _img (filename) {
  let name = path.basename(filename, path.extname(filename));
  return {
    filename: filename,
    alt: stringcase.spinalcase(name)
  }
}
