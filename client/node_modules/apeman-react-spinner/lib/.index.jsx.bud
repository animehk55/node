/**
 * Bud file for index.js
 */

'use strict'

const Templates = require('apeman-asset-templates')
const pkg = require('../package.json')
const path = require('path')
const aglob = require('aglob')

let names = aglob.sync('*.jsx', { cwd: __dirname })
  .map((filename) => path.basename(filename, path.extname(filename)))
module.exports = {
  force: true,
  mode: '444',
  tmpl: Templates.reactIndex,
  get data () {
    return {
      pkg,
      components: names
        .filter((name) => name !== 'index')
        .filter((name) => /^ap/.test(name)),
      functions: names
        .filter((name) => name !== 'index')
        .filter((name) => /^with/.test(name))

    }
  }
}

if (!module.parent) {
  require('coz').render(__filename)
}